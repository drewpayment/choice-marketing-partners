{"version":3,"sources":["employees.js","upload.js","custom.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["\n/*\n$('#editEmployeeBtn').on('click', function(){\n\tvar $clickedBtn = $(this);\n\tvar token = $('[data-token=\"true\"]').data('value');\n\tvar $modal = $('#modal_layout');\n\n\t$modal.on('show.bs.modal', function(){\n\t\t$.ajax({\n\t\t\turl: './editemployee/',\n\t\t\ttype: 'POST',\n\t\t\tdataType: \"html\", \n\t\t\tdata: {\n\t\t\t\tid: $clickedBtn.data('value'),\n\t\t\t\t_token: token\n\t\t\t}\n\t\t}).done(function(data){\n\t\t\tvar result = data;\n\t\t\t$modal.html(result);\n\n\t\t}).fail(function(event){\n\t\t\tvar result = event.responseText;\n\t\t\t$modal.html(result);\n\t\t});\n\t})\n\n\t$modal.modal('show');\n});\n*/\n\n$(function(){\n\tvar $modal = $('#modal_layout');\n\t$modal.on('hidden.bs.modal', function(){\n\t\t$modal.removeData();\n\t\t$modal.html('');\n\t});\n});\n\nfunction editEmployee(e){\n\tvar $clickedBtn = $($(e)[0]);\n\tvar token = $('[data-token=\"true\"]').data('value');\n\tvar $modal = $('#modal_layout');\n\n\t$modal.on('show.bs.modal', function(){\n\t\t$.ajax({\n\t\t\turl: './editemployee/',\n\t\t\ttype: 'POST',\n\t\t\tdataType: \"html\", \n\t\t\tdata: {\n\t\t\t\tid: $clickedBtn.data('value'),\n\t\t\t\t_token: token\n\t\t\t}\n\t\t}).done(function(data){\n\t\t\t$modal.html(data);\n\n\t\t}).fail(function(event){\n\t\t\tvar result = event.responseText;\n\t\t\t$modal.html(result);\n\t\t});\n\t});\n\n\t$modal.modal('show');\n}","\n// Vars\n\nvar MODAL_ELEM = $('#modal_layout'),\n\tsalesList = [],\n\toverList = [],\n\tcurrentAgentId,\n\tcurrentIssueDt,\n\tcurrentWkEnding,\n\toverHot,\n    expHot,\n\ttoken,\n    expensesList = [],\n    vendor;\n\nvar setNewSale = function (s){\n    return {\n        id: s[0],\n        date: s[1],\n        name: {\n            first: s[2],\n            last: s[3]\n        },\n        address: s[4],\n        city: s[5],\n        status: s[6],\n        amount: s[7],\n        agentid: null,\n        issueDate: null,\n        wkending: null,\n        vendor: null\n    };\n};\n\n\nvar setNewOverride = function (o){\n    return {\n        id: o[0],\n        name: o[1],\n        numOfSales: o[2],\n        commission: o[3],\n        total: o[4],\n        agentid: currentAgentId,\n        issueDate: currentIssueDt,\n        wkending: currentWkEnding\n    };\n};\n\n\nvar setNewExpense = function (e){\n    return {\n        type: e[0],\n        amount: e[1],\n        notes: e[2],\n        agentid: currentAgentId,\n        issueDate: currentIssueDt,\n        wkending: currentWkEnding\n    }\n};\n\n\n\n// Functions\n\n\nfunction handleSubmitNewInvoice(data){\n    setCommonUserInfo();\n\n    var invoiceData = paystubHot.getData();\n    var overrideData = overHot.getData();\n    var expenseData = expHot.getData();\n\n    var invoices = cleanArray(invoiceData, paystubHot);\n    var overrides = cleanArray(overrideData, overHot);\n    var expenses = cleanArray(expenseData, expHot);\n\n    $.each(invoices, function(i, obj){\n        if(obj !== null && obj !== undefined){\n            var s = setNewSale(obj);\n            s.id = i;\n            s.agentid = currentAgentId;\n            s.issueDate = currentIssueDt;\n            s.wkending = currentWkEnding;\n            s.vendor = vendor;\n            salesList.push(s);\n        }\n    });\n\n    $.each(overrides, function(i, obj){\n        if(obj !== null && obj !== undefined) {\n            var o = setNewOverride(obj);\n            o.id = i;\n            o.agentid = currentAgentId;\n            o.issueDate = currentIssueDt;\n            o.wkending = currentWkEnding;\n            overList.push(o);\n        }\n    });\n\n    $.each(expenses, function(i, obj){\n        if(obj !== null && obj !== undefined){\n            var e = setNewExpense(obj);\n            expensesList.push(e);\n        }\n    });\n\n    $.ajax({\n        url: '/upload/invoice',\n        type: 'POST',\n        data: {\n            _token: token,\n            sales: salesList,\n            overrides: overList,\n            expenses: expensesList\n        },\n        dataType:'JSON'\n    }).done(function(data){\n\n        if(data) setUserMessage(\"Success!\");\n\n    });\n\n}\n\n\nfunction setUserMessage(message){\n\n    $('#js_msgs').removeClass('hidden').html(message).fadeOut(2500, function(){\n        paystubHot.updateSettings({\n            data: []\n        });\n        overHot.updateSettings({\n            data: []\n        });\n        expHot.updateSettings({\n            data: []\n        });\n    });\n\n}\n\n\nfunction verifyOverrides(){\n\n\t$.ajax({\n\t\turl: '/upload/overrides-modal',\n\t\ttype: 'GET',\n\t\tdataType: 'html'\n\t}).done(function(data){\n\t\tMODAL_ELEM.html(data);\n\n\t\twireButtonEvents(true, '#modal_layout');\n\t});\n\n}\n\n\nfunction setCommonUserInfo(){\n    token = $('meta[name=\"csrf-token\"]').attr('content');\n    currentAgentId = $('#employee').val();\n    currentIssueDt = new Date($('#issueDate').val());\n    currentWkEnding = $('#wkendDate').val();\n    vendor = $('#vendor').val();\n}\n\n\nfunction cancelOverrides(event){\n\n\t// need to handle where user gets sent after clicking no\n\n\tMODAL_ELEM.modal('hide');\n}\n\n\nMODAL_ELEM.off().on('shown.bs.modal', function(){\n\t// hide/show modal to handle refreshing content\n\tMODAL_ELEM.modal('hide').modal('show');\n});\n\n\n\n// Register events\n\n$(document).on('show.bs.modal', MODAL_ELEM, function(e){ verifyOverrides(e); });\n$(document).on('click', '#noOvrBtn', function(e) { cancelOverrides(e); }); // no overrides, cancel and return\n$(document).on('click', '#yesOvrBtn', function(e) { handleOverridesInput(); }); // include overrides, advance to overrides input view\n\n\n","var tag = {\n\n\tSUBMIT_INVOICE_BTN: 1\n\n};\n\n// after event controls\n\n\nfunction processDataTag(data){\n\n\tif (data.tag === tag.SUBMIT_INVOICE_BTN) handleSubmitNewInvoice(data);\n\n}\n\n\nfunction afterEventControl(evt){\n\n\tif(evt.target !== evt.currentTarget){\n\t\tvar elem = $(evt.target),\n\t\t\tdataList = elem.data(),\n\t\t\tdata = {};\n\n\t\tdata.e = evt.target;\n\t\tdata.tag = dataList[\"tag\"];\n\n\t\tif(dataList[\"parentid\"] == undefined) {\n\t\t\tvar parent = (elem.closest('[data-parent=\"true\"]').length > 0) ? elem.closest('[data-parent=\"true\"]') : $('[data-parent=\"true\"]');\n\t\t\tdata.parent = parent;\n\t\t\tdata.parentid = ($(parent).data('parentid') === undefined) ? null : $(parent).data('parentid');\n\t\t} else {\n\t\t    data.parentid = dataList[\"parentid\"];\n\t\t    data.parent = $('[data-parentid=\"'+data.parentid+'\"]').get();\n        }\n\n\n\t\tprocessDataTag(data);\n\t}\n\n\tevt.stopPropagation();\n}\n\n\n// wire up events\n\nfunction wireButtonEvents(wireEvent, container){\n\n    // parent containers available on page load\n    if(container === undefined || container === null) {\n        container = document.querySelector('body');\n\n\n    } else {\n        container = document.querySelector(container);\n    }\n\n\n\n    if(wireEvent){\n        // wire up initialized container\n        if(container !== undefined && container !== null) {\n            container.addEventListener(\"click\", afterEventControl, false);\n\n\n\n\n            container = null;\n        }\n    }\n\n}\n\n\n// JS helper functions\n\nfunction cleanArray(data, hot) {\n    var temp = {};\n\n    $.each(data, function(idx, obj){\n       if(!hot.isEmptyRow(idx)) temp[idx] = obj;\n    });\n\n    return temp;\n\n}\n\n"],"sourceRoot":"/source/"}