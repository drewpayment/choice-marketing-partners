{"version":3,"sources":["detail.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.js","sourcesContent":["var managerId;\n\nvar REGEX_EMAIL = '([a-z0-9!#$%&\\'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&\\'*+/=?^_`{|}~-]+)*@' +\n    '(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)';\n\nvar emps = JSON.parse($('#jsobject').html());\n\nvar $select = $('#employeeList').selectize({\n    persist: false,\n    maxItems: 1,\n    valueField: 'id',\n    labelField: 'name',\n    searchField: ['name'],\n    options: emps,\n    render: {\n        item: function(item, escape) {\n            return '<div>' +\n                (item.name ? '<span class=\"name\">' + escape(item.name) + '</span> ' : '') +\n                '</div>';\n        },\n        option: function(item, escape) {\n            var label = item.name;\n            return '<div>' +\n                '<span class=\"label\">' + escape(label) + '</span> ' +\n                '</div>';\n        }\n    },\n    onChange: function(value){\n        if(value) {\n            confirmationBox(value);\n\n            managerId = $('[data-manager=\"true\"]').data('managerid');\n\n            var selectize = $select[0].selectize;\n            selectize.clear();\n        }\n    }\n});\n\nvar confirmationBox = function(val){\n\n    var options = {\n        url: '/overrides/confirm-add-agent/'+val,\n        dataType: 'html',\n        afterData: afterData\n    };\n\n    fireAjaxRequest(options);\n\n    function afterData(data){\n        if(data){\n            var modal = $('#modal_layout');\n            modal.html(data);\n            modal.on('shown.bs.modal', function(){\n\n                $('#confirm-submit').on('click', function(){\n\n                    var $el = $(this).closest('[data-parent=\"true\"]');\n                    var agentId = $el.data('parentid');\n                    addAgentOverride(agentId);\n                    modal.modal('hide');\n                    $(this).off();\n\n                })\n\n            }).on('hidden.bs.modal', function(){\n\n                modal.html('');\n                refreshDetail();\n\n            }).modal('show');\n        }\n    }\n\n};\n\n\nvar addAgentOverride = function(id){\n\n    var options = {\n        url: '/overrides/handleAddAgentOverride',\n        type: 'POST',\n        data: {\n            agentId: id,\n            mgrId: managerId\n        },\n        afterData: afterData\n    };\n\n    fireAjaxRequest(options);\n\n    function afterData(data){\n\n        if(data){\n\n            setMessageContainer('Success!');\n\n        }\n\n    }\n\n};\n\n\n$(document).on('click', '#delete-override', function(){\n\n    managerId = $('[data-manager=\"true\"]').data('managerid');\n    var id = $(this).closest('[data-parent=\"true\"]').data('parentid');\n\n    var options = {\n        url: '/overrides/confirm-delete-agent/'+id,\n        dataType: 'html',\n        afterData: afterData\n    };\n\n    fireAjaxRequest(options);\n\n    function afterData(data){\n        if(data){\n            var modal = $('#modal_layout');\n            modal.html(data);\n            modal.on('shown.bs.modal', function(){\n\n                $('#confirm-submit').on('click', function(){\n\n                    var $el = $(this).closest('[data-parent=\"true\"]');\n                    var agentId = $el.data('parentid');\n                    deleteAgentOverride(agentId);\n                    modal.modal('hide');\n\n                });\n\n            }).on('hidden.bs.modal', function(){\n\n                modal.html('');\n                refreshDetail();\n\n            }).modal('show');\n        }\n    }\n\n});\n\nvar deleteAgentOverride = function(id){\n\n    var options = {\n        url: '/overrides/handleDeleteAgentOverride',\n        type: 'POST',\n        data: {\n            agentId: id,\n            mgrId: managerId\n        },\n        afterData: afterData\n    };\n\n    fireAjaxRequest(options);\n\n    function afterData(data){\n        if(data){\n            setMessageContainer('Success!');\n        }\n    }\n\n};\n\n\nvar refreshDetail = function(){\n    managerId = (managerId > 0) ? managerId : $('[data-manager=\"true\"]').data('mangerid');\n\n    var options = {\n        url: '/overrides/refresh-detail/' + managerId,\n        dataType: 'html',\n        afterData: afterData\n    };\n\n    fireAjaxRequest(options);\n\n    function afterData(data){\n        if(data){\n            $('#row-data').html(data);\n        }\n    }\n}"]}