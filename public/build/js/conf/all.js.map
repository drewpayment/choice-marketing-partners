{"version":3,"sources":["employee.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["/**\n * Display employee detail to make edits if necessary.\n */\n$(document).on('click', '[data-action=\"edit-agent\"]', function(){\n    var id = $(this).closest('[data-parent=\"true\"]').data('parentid');\n\n    var options = {\n        url: '/getExistingEmployeeModal',\n        type: 'GET',\n        dataType: 'html',\n        data: {\n            id: id\n        },\n        success: afterData\n    };\n\n    fireAjaxRequest(options);\n\n    function afterData(data){\n        var modal = $('#modal_layout');\n        modal.html(data);\n        modal.on('hidden.bs.modal', function(e){\n            e.stopPropagation();\n            $(document).off('click', '[data-action=\"save-employee-changes\"]'); // unregister event handler for updating employee\n\n            modal.html('').off();\n            refreshEmployees();\n\n        }).on('shown.bs.modal', function(){\n\n            registerSaveEmployeeEditHandler();\n\n        }).modal('show');\n\n    }\n});\n\n/**\n * Handle updating existing employee.\n */\nvar registerSaveEmployeeEditHandler = function(){\n    var modal = $('#modal_layout');\n\n    $(document).on('click', '[data-action=\"save-employee-changes\"]', function(){\n        var form = modal.find('form');\n\n        var params = {\n            id: form.data('parentid'),\n            name: form.find('#emp_name').val(),\n            email: form.find('#emp_email').val(),\n            phoneNo: form.find('#emp_phone').val(),\n            address: form.find('#emp_address').val(),\n            isActive: form.find('#emp_active').is(':checked') ? 1 : 0,\n            isMgr: form.find('#is_mgr').is(':checked') ? 1 : 0,\n            salesId1: form.find('#sales_id1').val(),\n            salesId2: form.find('#sales_id2').val(),\n            salesId3: form.find('#sales_id3').val()\n        };\n\n        var options = {\n            url: '/updateExistingEmployee',\n            type: 'POST',\n            dataType: 'json',\n            data: params,\n            afterData: afterData\n        };\n\n        fireAjaxRequest(options);\n\n        function afterData(data){\n            modal.modal('hide');\n            if(data){\n                setMessageContainer('Success!');\n            } else {\n                setMessageContainer('Sorry, looks like something went wrong. Please try again.', null, 'danger');\n            }\n        }\n    });\n};\n\n/*\n * Show modal to create new employee\n */\n$(document).on('click', '[data-action=\"create-employee-modal\"]', function(){\n    var modal = $('#create-employee-modal');\n\n    modal.on('hidden.bs.modal', function(){\n        modal.off();\n        $(document).off('click', '[data-action=\"save-new-employee\"]');\n        refreshEmployees();\n    }).on('shown.bs.modal', function(){\n        registerSaveEmployeeCreateHandler();\n    }).modal('show');\n});\n\n/**\n * Handle creating new employee\n */\nvar registerSaveEmployeeCreateHandler = function(){\n    var modal = $('#create-employee-modal');\n    $(document).on('click', '[data-action=\"save-new-employee\"]', function(){\n        var params = {\n            name: $('#emp_name').val(),\n            email: $('#emp_email').val(),\n            phoneNo: $('#emp_phone').val(),\n            address: $('#emp_address').val(),\n            isMgr: $('#is_mgr').is(':checked') ? 1 : 0,\n            salesId1: $('#sales_id1').val(),\n            salesId2: $('#sales_id2').val(),\n            salesId3: $('#sales_id3').val()\n        };\n\n        var options = {\n            url: '/createNewEmployee',\n            type: 'POST',\n            dataType: 'json',\n            data: params,\n            afterData: afterData\n        };\n\n        fireAjaxRequest(options);\n\n        function afterData(data){\n            modal.modal('hide');\n            if(data){\n                setMessageContainer('Saved successfully!');\n            } else {\n                setMessageContainer('Sorry, looks like something went wrong. Please try again!', null, 'danger');\n            }\n        }\n    });\n};\n\n\n/**\n * Refresh employee row data.\n */\nvar refreshEmployees = function(){\n    var params = {\n        showAll: $('#show-all-employees').hasClass('active')\n    };\n\n    var options = {\n        url: '/refreshEmployees',\n        type: 'GET',\n        dataType: 'html',\n        data: params,\n        afterData: afterData\n    };\n\n    fireAjaxRequest(options);\n\n    function afterData(data){\n        if(data){\n\n            $('#row-data').html(data);\n\n        } else {\n            setMessageContainer('Sorry, looks like we had an issue refreshing your employee list. Please refresh the page.', null, 'danger');\n        }\n    }\n};\n\n/**\n * Toggle show all employees button\n */\n$(document).on('click', '#show-all-employees', refreshEmployees);\n\n\n$(document).on('click', '#emp_active', function(){\n    var elem = $(this);\n\n    var params = {\n        id: elem.closest('[data-parent=\"true\"]').data('parentid'),\n        active: elem.is(':checked')\n    };\n\n    var options = {\n        url: '/updateEmployeeStatus',\n        type: 'POST',\n        dataType: 'json',\n        data: params,\n        afterData: afterData\n    };\n\n    fireAjaxRequest(options);\n\n    function afterData(data){\n        if(data){\n            setMessageContainer('This employee has been updated.');\n        }\n    }\n});\n\n\n\n"]}